<!-- Header content shared by all pages -->

<header class="sticky top-0 z-20 bg-black shadow-md py-2 px-4">
  <nav class="container mx-auto flex items-center justify-between">
    <a href="index.html">
      <img src="logo.jpg" alt="Logo" class="w-100 h-100 md:w-[150px] md:h-[100px]" />
    </a>

    <button id="main-btn" class="text-3xl md:hidden focus:outline-none">☰</button>

    <div class="hidden md:flex items-center space-x-6 font-roboto font-semibold">
      <a class="px-3 hover:text-[#E60001]" href="/caloriecalc.html">CALORIE CALCULATOR</a>

      <div class="relative group">
        <button class="flex items-center px-3 hover:text-[#E60001]">
          WORKOUT SPLITS <span class="ml-1 text-lg">▼</span>
        </button>
        <div class="absolute left-0 mt-1 hidden w-48 flex-col rounded bg-black/95 py-2 group-hover:flex">
          <a href="./struct.html" class="px-4 py-1 hover:text-[#E60001]">Split Structuring Basics</a>
          <a href="./3day.html" class="px-4 py-1 hover:text-[#E60001]">Full-Body (3-Day)</a>
          <a href="./4day.html" class="px-4 py-1 hover:text-[#E60001]">Upper-Lower (4-Day)</a>
          <a href="./6day.html" class="px-4 py-1 hover:text-[#E60001]">PPL (6-Day)</a>
        </div>
      </div>

      <div class="relative group">
        <button class="flex items-center px-3 hover:text-[#E60001]">
          GYM INFO <span class="ml-1 text-lg">▼</span>
        </button>
        <div class="absolute left-0 mt-1 hidden w-44 flex-col rounded bg-black/95 py-2 group-hover:flex">
          <a href="./fundements.html" class="px-4 py-1 hover:text-[#E60001]">Workout Fundamentals</a>
          <a href="./bulk.html" class="px-4 py-1 hover:text-[#E60001]">Bulk or Cut?</a>
          <a href="./rep.html" class="px-4 py-1 hover:text-[#E60001]">Rep Ranges</a>
          <a href="./creatine.html" class="px-4 py-1 hover:text-[#E60001]">Why Creatine?</a>
          <a href="./rest.html" class="px-4 py-1 hover:text-[#E60001]">Rest & Recovery</a>
        </div>
      </div>

      <a class="px-3 hover:text-[#E60001]" href="./portfolio.html">PORTFOLIO</a>
      <a class="px-3 hover:text-[#E60001]" href="./contact.html">CONTACT</a>

      <div id="account-desktop" class="flex items-center space-x-3"></div>
    </div>
  </nav>

  <div id="main-menu" class="hidden flex-col md:hidden px-4 pb-4">
    <a class="py-2 hover:text-[#E60001]" href="/caloriecalc.html">CALORIE CALCULATOR</a>

    <button data-target="splits" class="flex items-center py-2 hover:text-[#E60001]">
      WORKOUT SPLITS <span class="ml-1">▼</span>
    </button>
    <div id="splits" class="hidden flex-col pl-4">
      <a class="py-1 hover:text-[#E60001]" href="./struct.html">Split Structuring Basics</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./3day.html">Full-Body (3-Day)</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./4day.html">Upper-Lower (4-Day)</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./6day.html">PPL (6-Day)</a>
    </div>

    <button data-target="info" class="flex items-center py-2 hover:text-[#E60001]">
      GYM INFO <span class="ml-1">▼</span>
    </button>
    <div id="info" class="hidden flex-col pl-4">
      <a class="py-1 hover:text-[#E60001]" href="/fundements.html">Workout Fundamentals</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./bulk.html">Bulk or Cut</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./rep.html">Rep Ranges</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./creatine.html">Why Creatine?</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./rest.html">Rest & Recovery</a>
    </div>

    <a class="py-2 hover:text-[#E60001]" href="./portfolio.html">PORTFOLIO</a>
    <br>
    <a class="py-2 hover:text-[#E60001]" href="./contact.html">CONTACT</a>

    <button data-target="account" class="flex items-center py-2 hover:text-[#E60001]">
      ACCOUNT <span class="ml-1">▼</span>
    </button>
    <div id="account" class="hidden flex-col pl-4">
      <a class="py-1 hover:text-[#E60001]" href="/login.html">Login</a>
      <br>
      <a class="py-1 hover:text-[#E60001]" href="./signup.html">Signup</a>
    </div>
    <br>
    <br>
  </div>
</header>
<script>
  // Session helpers moved into the shared header so all pages have consistent account UI
  function isLoggedIn() {
    return !!localStorage.getItem("gt_access_token");
  }

  function getUserEmail() {
    return localStorage.getItem("gt_email");
  }

  function logout() {
    localStorage.removeItem("gt_user_id");
    localStorage.removeItem("gt_access_token");
    localStorage.removeItem("gt_email");
    window.location.reload();
  }

  function renderAccountUI() {
    const loggedIn = isLoggedIn();
    const email = getUserEmail() || "User";

    const desktopContainer = document.getElementById("account-desktop");
    const mobileContainer = document.getElementById("account");

    if (desktopContainer) {
      if (loggedIn) {
        desktopContainer.innerHTML = `
          <span class="text-sm md:text-base">
            Logged in as <span class="font-semibold">${email}</span>
          </span>
          <button id="logout-desktop" class="px-3 hover:text-[#E60001] text-sm md:text-base">Logout</button>
        `;
      } else {
        desktopContainer.innerHTML = `
          <a href="/login.html" class="px-3 hover:text-[#E60001] text-sm md:text-base">Login</a>
          <a href="/signup.html" class="px-3 hover:text-[#E60001] text-sm md:text-base">Signup</a>
        `;
      }
    }

    if (mobileContainer) {
      if (loggedIn) {
        mobileContainer.innerHTML = `
          <span class="py-1">Logged in as <span class="font-semibold">${email}</span></span>
          <button id="logout-mobile" class="py-1 text-left hover:text-[#E60001]">Logout</button>
        `;
      } else {
        mobileContainer.innerHTML = `
          <a class="py-1 hover:text-[#E60001]" href="/login.html">Login</a>
          <br>
          <a class="py-1 hover:text-[#E60001]" href="/signup.html">Signup</a>
        `;
      }
    }

    const logoutDesktop = document.getElementById("logout-desktop");
    const logoutMobile = document.getElementById("logout-mobile");

    if (logoutDesktop) logoutDesktop.addEventListener("click", (e) => { e.preventDefault(); logout(); });
    if (logoutMobile) logoutMobile.addEventListener("click", (e) => { e.preventDefault(); logout(); });
  }

  // If the header loads before DOMContentLoaded, ensure UI initializes.
  document.addEventListener("DOMContentLoaded", renderAccountUI);
</script>